{
	"project": "quotes",
	"student": {
		"first_name": "unknown",
		"last_name": "unknown"
	},
	"quotes/apps/quotes_app/urls.py": {
		"raw": "from django.conf.urls import url from . import views urlpatterns = [ url(r'^$', views.index), url(r'^register$', views.register), url(r'^login$', views.login), url(r'^logout$', views.logout), url(r'^quotes$', views.quotes), url(r'^add_quote$', views.addQuote), url(r'^user/(?P<id>\\d+)$', views.showUser), url(r'^quote/(?P<id>\\d+)/favorite$', views.favorite), url(r'^quote/(?P<id>\\d+)/unfavorite$', views.unfavorite) ]"
	},
	"quotes/apps/quotes_app/migrations/0001_initial.py": {
		"raw": "# -*- coding: utf-8 -*- # Generated by Django 1.11.5 on 2017-11-01 00:32 from __future__ import unicode_literals from django.db import migrations, models import django.db.models.deletion import django.db.models.manager class Migration(migrations.Migration): initial = True dependencies = [ ] operations = [ migrations.CreateModel( name='Quote', fields=[ ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('quoted_by', models.CharField(max_length=255)), ('message', models.CharField(max_length=255)), ], managers=[ ('quoteManager', django.db.models.manager.Manager()), ], ), migrations.CreateModel( name='User', fields=[ ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')), ('name', models.CharField(max_length=255)), ('alias', models.CharField(max_length=255)), ('email', models.CharField(max_length=255)), ('password', models.CharField(max_length=255)), ('date_of_birth', models.DateField(max_length=255)), ], managers=[ ('userManager', django.db.models.manager.Manager()), ], ), migrations.AddField( model_name='quote', name='favorites', field=models.ManyToManyField(related_name='favorite_quotes', to='quotes_app.User'), ), migrations.AddField( model_name='quote', name='poster', field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='quotes', to='quotes_app.User'), ), ] "
	},
	"quotes/apps/quotes_app/apps.py": {
		"raw": "# -*- coding: utf-8 -*- from __future__ import unicode_literals from django.apps import AppConfig class QuotesAppConfig(AppConfig): name = 'quotes_app' "
	},
	"quotes/apps/quotes_app/admin.py": {
		"raw": "# -*- coding: utf-8 -*- from __future__ import unicode_literals from django.contrib import admin # Register your models here. "
	},
	"quotes/apps/quotes_app/models.py": {
		"raw": "# -*- coding: utf-8 -*- from __future__ import unicode_literals from django.db import models from datetime import datetime import bcrypt import re EMAIL_REGEX = re.compile(r'^[a-zA-Z0-9.+_-]+@[a-zA-Z0-9._-]+\\.[a-zA-Z]+$') class UserManager(models.Manager): def register(self, data): response = { \"user\": None, \"logged_in\": False, \"errors\": [] } if len(data[\"name\"]) < 3: response[\"errors\"].append(\"Name must be 3 characters or longer!\") if len(data[\"alias\"]) < 3: response[\"errors\"].append(\"Alias must be 3 characters or longer!\") if len(data[\"email\"]) == 0: response[\"errors\"].append(\"Email is required!\") elif not EMAIL_REGEX.match(data[\"email\"]): response[\"errors\"].append(\"Invalid Email!\") elif len(User.userManager.filter(email=data[\"email\"])) > 0: response[\"errors\"].append(\"Email already in use!\") if len(data[\"password\"]) < 8: response[\"errors\"].append(\"Password must be 8 characters or longer!\") if data[\"password\"] != data[\"confirm_password\"]: response[\"errors\"].append(\"Confirm Password must match Password!\") if len(data[\"date_of_birth\"]) == 0: response[\"errors\"].append(\"Date of Birth is required!\") else: dob = datetime.strptime(data[\"date_of_birth\"], '%Y-%m-%d') if dob > datetime.now(): response[\"errors\"].append(\"Date of Birth must be in the past!\") if len(response[\"errors\"]) == 0: response[\"logged_in\"] = True response[\"user\"] = User.userManager.create( name=data[\"name\"], alias=data[\"alias\"], email=data[\"email\"], password=bcrypt.hashpw(data[\"password\"].encode(), bcrypt.gensalt()), date_of_birth=dob ) return response def login(self, data): response = { \"user\": None, \"logged_in\": False, \"errors\": [] } if len(data[\"email\"]) == 0: response[\"errors\"].append(\"Email is required!\") elif not EMAIL_REGEX.match(data[\"email\"]): response[\"errors\"].append(\"Invalid email!\") if len(data[\"password\"]) < 8: response[\"errors\"].append(\"Password must be 8 characters or longer!\") if len(response[\"errors\"]) == 0: user = User.userManager.filter(email=data[\"email\"]) if len(user) > 0: if bcrypt.checkpw(data[\"password\"].encode(), user[0].password.encode()): response[\"logged_in\"] = True response[\"user\"] = user[0] else: response[\"errors\"].append(\"Incorrect Password!\") else: response[\"errors\"].append(\"Email not found!\") return response class User(models.Model): name = models.CharField(max_length=255) alias = models.CharField(max_length=255) email = models.CharField(max_length=255) password = models.CharField(max_length=255) date_of_birth = models.DateField(max_length=255) userManager = UserManager() class QuoteManager(models.Manager): def addQuote(self, data, id): errors = [] if len(data[\"quoted_by\"]) < 3: errors.append(\"Quoted By must be 3 characters or longer!\") if len(data[\"message\"]) < 10: errors.append(\"Message must be 10 characters or longer!\") if len(errors) > 0: return False, errors else: return True, Quote.quoteManager.create(quoted_by=data[\"quoted_by\"], message=data[\"message\"], poster_id=id) class Quote(models.Model): quoted_by = models.CharField(max_length=255) message = models.CharField(max_length=255) poster = models.ForeignKey(User, related_name=\"quotes\") favorites = models.ManyToManyField(User, related_name=\"favorite_quotes\") quoteManager = QuoteManager()"
	},
	"quotes/apps/quotes_app/templates/quotes_app/user.html": {
		"raw": "<!DOCTYPE html> <html> <head> <title>Quotes</title> </head> <body> <p><a href=\"/quotes\">Dashboard</a> | <a href=\"/logout\">Logout</a></p> <p>Posts by: {{ user.name }}</p> <p>Count: {{ user.quotes.count }} {% for quote in user.quotes.all %} <p><b>{{ quote.quoted_by }}</b>: {{ quote.message }}</p> {% endfor %} </body> </html>"
	},
	"quotes/apps/quotes_app/templates/quotes_app/index.html": {
		"raw": "<!DOCTYPE html> <html> <head> <title>Quotes</title> </head> <body> <h1>Welcome to Quotes</h1> <fieldset> <legend>Register</legend> <form action=\"/register\" method=\"post\"> {% csrf_token %} Name: <input type=\"text\" name=\"name\" placeholder=\"name\"><br> Alias: <input type=\"text\" name=\"alias\" placeholder=\"alias\"><br> Email: <input type=\"text\" name=\"email\" placeholder=\"email\"><br> Password: <input type=\"password\" name=\"password\" placeholder=\"password\"><br> Confirm Password: <input type=\"password\" name=\"confirm_password\" placeholder=\"confirm password\"><br> Date of Birth: <input type=\"date\" name=\"date_of_birth\"><br> <input type=\"submit\" value=\"Register\"> </form> </fieldset> <fieldset> <legend>Login</legend> <form action=\"/login\" method=\"post\"> {% csrf_token %} Email: <input type=\"text\" name=\"email\" placeholder=\"email\"><br> Password: <input type=\"password\" name=\"password\" placeholder=\"password\"><br> <input type=\"submit\" value=\"Login\"> </form> </fieldset> {% if messages %} <ul> {% for message in messages %} <li>{{ message }}</li> {% endfor %} </ul> {% endif %} </body> </html>"
	},
	"quotes/apps/quotes_app/templates/quotes_app/quotes.html": {
		"raw": "<!DOCTYPE html> <html> <head> <title>Quotes</title> </head> <body> <h1>Welcome to Quotes</h1> <p><a href=\"/logout\">Logout</a></p> <p>Welcome back: {{ request.session.user.name }}</p> <fieldset> <legend>Quoteable Quotes</legend> {% if quotes.count > 0 %} {% for quote in quotes %} <fieldset> <p>Quoted by: {{ quote.quoted_by }}</p> <p>{{quote.message}}</p> <p>Posted by: <a href=\"/user/{{ quote.poster.id }}\">{{ quote.poster.alias }}</a></p> <form action=\"quote/{{quote.id}}/favorite\" method=\"post\"> {% csrf_token %} <input type=\"submit\" value=\"Add to my favorites\"> </form> </fieldset><br> {% endfor %} {% else %} <p>There are no quoteable quotes.</p> {% endif %} </fieldset> <fieldset> <legend>Favorited Quotes</legend> {% if favorite_quotes.count > 0 %} {% for quote in favorite_quotes %} <fieldset> <p>Quoted by: {{ quote.quoted_by }}</p> <p>{{quote.message}}</p> <p>Posted by: <a href=\"/user/{{ quote.poster.id }}\">{{ quote.poster.alias }}</a></p> <form action=\"quote/{{quote.id}}/unfavorite\" method=\"post\"> {% csrf_token %} <input type=\"submit\" value=\"Remove from my favorites\"> </form> </fieldset><br> {% endfor %} {% else %} <p>You have no favorite quotes.</p> {% endif %} </fieldset> <fieldset> <legend>Contribute a Quote</legend> <form action=\"/add_quote\" method=\"post\"> {% csrf_token %} Quoted By:<br><input type=\"text\" name=\"quoted_by\" placeholder=\"Quoted by\"><br> Message:<br><textarea name=\"message\" placeholder=\"Message\"></textarea><br> <input type=\"submit\" value=\"Contribute a quote\"> </form> </fieldset> {% if messages %} <ul> {% for message in messages %} <li>{{ message }}</li> {% endfor %} </ul> {% endif %} </body> </html>"
	},
	"quotes/apps/quotes_app/views.py": {
		"raw": "# -*- coding: utf-8 -*- from __future__ import unicode_literals from django.shortcuts import render, redirect from django.contrib import messages from .models import User, Quote def index(req): return render(req, \"quotes_app/index.html\") def register(req): user = User.userManager.register(req.POST) if user[\"logged_in\"]: req.session[\"user\"] = { \"id\": user[\"user\"].id, \"name\": user[\"user\"].name } return redirect('/quotes') else: for error in user[\"errors\"]: messages.add_message(req, messages.ERROR, error) return redirect('/') def login(req): user = User.userManager.login(req.POST) if user[\"logged_in\"]: req.session[\"user\"] = { \"id\": user[\"user\"].id, \"name\": user[\"user\"].name } return redirect('/quotes') else: for error in user[\"errors\"]: messages.add_message(req, messages.ERROR, error) return redirect('/') def logout(req): req.session.clear() return redirect('/') def quotes(req): if 'user' not in req.session: messages.add_message(req, messages.ERROR, \"You must log in first!\") all_quotes = Quote.quoteManager.all() favorite_quotes = User.userManager.get(id=req.session[\"user\"][\"id\"]).favorite_quotes.all() for quote in favorite_quotes: all_quotes = all_quotes.exclude(id=quote.id) return render(req, \"quotes_app/quotes.html\", {\"quotes\": all_quotes, \"favorite_quotes\": favorite_quotes}) def addQuote(req): quote = Quote.quoteManager.addQuote(req.POST, req.session[\"user\"][\"id\"]) if not quote[0]: for error in quote[1]: messages.add_message(req, messages.ERROR, error) else: quote[1].favorites.add(User.userManager.get(id=req.session[\"user\"][\"id\"])) return redirect(\"/quotes\") def showUser(req, id): return render(req, \"quotes_app/user.html\", {\"user\": User.userManager.get(id=req.session[\"user\"][\"id\"])}) def favorite(req, id): Quote.quoteManager.get(id=id).favorites.add(User.userManager.get(id=req.session[\"user\"][\"id\"])) return redirect(\"/quotes\") def unfavorite(req, id): Quote.quoteManager.get(id=id).favorites.remove(User.userManager.get(id=req.session[\"user\"][\"id\"])) return redirect(\"/quotes\")"
	},
	"quotes/apps/quotes_app/tests.py": {
		"raw": "# -*- coding: utf-8 -*- from __future__ import unicode_literals from django.test import TestCase # Create your tests here."
	},
	"quotes/manage.py": {
		"raw": "#!/usr/bin/env python import os import sys if __name__ == \"__main__\": os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"quotes.settings\") try: from django.core.management import execute_from_command_line except ImportError: # The above import may fail for some other reason. Ensure that the # issue is really that Django is missing to avoid masking other # exceptions on Python 2. try: import django except ImportError: raise ImportError( \"Couldn't import Django. Are you sure it's installed and \" \"available on your PYTHONPATH environment variable? Did you \" \"forget to activate a virtual environment?\" ) raise execute_from_command_line(sys.argv) "
	},
	"quotes/quotes/urls.py": {
		"raw": "\"\"\"quotes URL Configuration The `urlpatterns` list routes URLs to views. For more information please see: https://docs.djangoproject.com/en/1.11/topics/http/urls/ Examples: Function views 1. Add an import: from my_app import views 2. Add a URL to urlpatterns: url(r'^$', views.home, name='home') Class-based views 1. Add an import: from other_app.views import Home 2. Add a URL to urlpatterns: url(r'^$', Home.as_view(), name='home') Including another URLconf 1. Import the include() function: from django.conf.urls import url, include 2. Add a URL to urlpatterns: url(r'^blog/', include('blog.urls')) \"\"\" from django.conf.urls import url, include urlpatterns = [ url(r'^', include(\"apps.quotes_app.urls\")) ]"
	},
	"quotes/quotes/wsgi.py": {
		"raw": "\"\"\" WSGI config for quotes project. It exposes the WSGI callable as a module-level variable named ``application``. For more information on this file, see https://docs.djangoproject.com/en/1.11/howto/deployment/wsgi/ \"\"\" import os from django.core.wsgi import get_wsgi_application os.environ.setdefault(\"DJANGO_SETTINGS_MODULE\", \"quotes.settings\") application = get_wsgi_application() "
	},
	"quotes/quotes/settings.py": {
		"raw": "\"\"\" Django settings for quotes project. Generated by 'django-admin startproject' using Django 1.11.5. For more information on this file, see https://docs.djangoproject.com/en/1.11/topics/settings/ For the full list of settings and their values, see https://docs.djangoproject.com/en/1.11/ref/settings/ \"\"\" import os # Build paths inside the project like this: os.path.join(BASE_DIR, ...) BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__))) # Quick-start development settings - unsuitable for production # See https://docs.djangoproject.com/en/1.11/howto/deployment/checklist/ # SECURITY WARNING: keep the secret key used in production secret! SECRET_KEY = '03u&se#h(7l21i(+)du4=&!nvhk)&0qi=0u5wj#%tp^6dk$@ck' # SECURITY WARNING: don't run with debug turned on in production! DEBUG = True ALLOWED_HOSTS = [] # Application definition INSTALLED_APPS = [ 'apps.quotes_app', 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] MIDDLEWARE = [ 'django.middleware.security.SecurityMiddleware', 'django.contrib.sessions.middleware.SessionMiddleware', 'django.middleware.common.CommonMiddleware', 'django.middleware.csrf.CsrfViewMiddleware', 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware', 'django.middleware.clickjacking.XFrameOptionsMiddleware', ] ROOT_URLCONF = 'quotes.urls' TEMPLATES = [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [], 'APP_DIRS': True, 'OPTIONS': { 'context_processors': [ 'django.template.context_processors.debug', 'django.template.context_processors.request', 'django.contrib.auth.context_processors.auth', 'django.contrib.messages.context_processors.messages', ], }, }, ] WSGI_APPLICATION = 'quotes.wsgi.application' # Database # https://docs.djangoproject.com/en/1.11/ref/settings/#databases DATABASES = { 'default': { 'ENGINE': 'django.db.backends.sqlite3', 'NAME': os.path.join(BASE_DIR, 'db.sqlite3'), } } # Password validation # https://docs.djangoproject.com/en/1.11/ref/settings/#auth-password-validators AUTH_PASSWORD_VALIDATORS = [ { 'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator', }, { 'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator', }, { 'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator', }, { 'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator', }, ] # Internationalization # https://docs.djangoproject.com/en/1.11/topics/i18n/ LANGUAGE_CODE = 'en-us' TIME_ZONE = 'UTC' USE_I18N = True USE_L10N = True USE_TZ = True # Static files (CSS, JavaScript, Images) # https://docs.djangoproject.com/en/1.11/howto/static-files/ STATIC_URL = '/static/' "
	}
}